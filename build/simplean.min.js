var Map=function(){this.keys=[],this.values=[]};Map.prototype.indexOf=function(t){for(var e=-1,i=0;i<this.keys.length;i++)if(this.keys[i]===t){e=i;break}return e},Map.prototype.set=function(t,e){var i=this.indexOf(t);return i>=0?this.values[i]=e:(this.keys.push(t),this.values.push(e)),e},Map.prototype.get=function(t){return this.values[this.indexOf(t)]},Map.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&(this.keys.splice(e,1),this.values.splice(e,1))};var Utility=function(){return{each:function(t,e){if(t&&t.length)t.forEach(e);else if("object"==typeof t)for(var i in t)if(t.hasOwnProperty(i)&&e(i,t[i])===!1)return},keys:function(t){var e=[];return Utility.each(t,function(t){e.push(t)}),e},extend:function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);return Utility.each(e,function(e){Utility.each(e,function(e,i){t[e]=i})}),t},getComputedStyle:function(t){return window.getComputedStyle(t)},firstUppercase:function(t){return t.replace(/^\w/,function(t){return t.toUpperCase()})},handleOptions:function(t){return t=t||{},t.delay=t.delay||"0ms",0!==t.duration&&(t.duration=t.duration||"300ms"),t.ease=t.ease||"linear","number"==typeof t.delay&&(t.delay+="ms"),"number"==typeof t.duration&&(t.duration+="ms"),t},wrapProperty:function(t){var e=["transition","transitionDelay","transitionProperty","transitionDuration","transitionTimingFunction","transform"];return e.indexOf(t)>-1&&eventPrefix&&(t=eventPrefix+Utility.firstUppercase(t)),t},addCssPrefix:function(t){var e=["transition","transition-delay","transition-property","transition-duration","transition-timing-function","transform"];return e.indexOf(t)>-1&&cssPrefix&&(t=cssPrefix+t),t},invokeIfExists:function(t,e,i){"function"==typeof t&&t.apply(i,e)},relayout:function(t){Utility.getComputedStyle(t).width}}}(),DomUtility=function(){return{diffStyle:function(t,e,i){for(var n=Utility.getComputedStyle(t),o=DomUtility.css(t,"transitionProperty"),r=[],s={},a=["width","height","padding","padding-left","padding-right","padding-top","padding-bottom","margin","margin-left","margin-right","margin-top","margin-bottom","lineHeight","border-width","font-size","letter-space","word-spacing","left","right","top","bottom","border-radius","background-color","color","border-color","opacity","transform","text-shadow","box-shadow","background-size","background","background-position","border-spacing","clip","max-width","max-height","min-width","min-height","outline","text-indent","vertical-align","z-index"],p=0;p<a.length;p++){var l=a[p],f=Utility.addCssPrefix(l),u=Utility.wrapProperty(l);void 0===e[i?l:u]||o.match("(^|\\s)"+f+",?\\b")||n[u]!==e[u]&&(r.push(f),"height"!==u&&"width"!==u||t.style[u]||(s[f]=n[u]))}return{properties:r,needInit:s}},diffDom:function(t,e){return this.diffStyle(t,Utility.getComputedStyle(e))},diffClass:function(t,e,i){var n=this,o=i?t.cloneNode(!0):document.createElement(t.tagName);o.style.visibility="hidden",o.className=e,t.parentNode.appendChild(o);var r=[];if(i)for(var s=[{node:t,targetNode:o}];s.length;){var a=s.pop(),p=n.diffDom(a.node,a.targetNode);r.push({elem:a.node,properties:p.properties});for(var l=a.node.children,f=a.targetNode.children,u=0;u<l.length;u++)s.push({node:l[u],targetNode:f[u]})}else{var p=n.diffDom(t,o);r.push({elem:t,properties:p.properties,needInit:p.needInit})}return DomUtility.removeDom(o),r},css:function(t,e,i){if("object"==typeof e)Utility.each(e,function(e,i){t.style[Utility.wrapProperty(e)]=i});else if("string"==typeof e)return void 0!==i&&(t.style[Utility.wrapProperty(e)]=i),t.style[Utility.wrapProperty(e)]},addTransition:function(t,e,i){var n="",o=function(t,e,i){return"function"==typeof t?t(e)||i:t||i};Utility.each(e,function(t){t=Utility.addCssPrefix(t),n+=", "+t+" "+i.duration+" "+o(i.ease,t,"linear")+" "+i.delay});var r=t.style[Utility.wrapProperty("transition")];t.style[Utility.wrapProperty("transition")]+=r?n:n.slice(2)},removeTransition:function(t,e){var i=t.style[Utility.wrapProperty("transition")];Utility.each(e,function(t){t=Utility.addCssPrefix(t),i=i.replace(new RegExp("(^|\\s)"+t+"\\b.*?\\D(,|$)"),"")}),t.style[Utility.wrapProperty("transition")]=i.trim(" ")},removeDom:function(t){"function"==typeof t.remove?t.remove():t.parentNode.removeChild(t)}}}(),list=[],vendors={Webkit:"webkit",Moz:"",O:"o"},cssPrefix="",eventPrefix="",testEl=document.createElement("div"),simpleanMap=new Map;Utility.each(vendors,function(t,e){return void 0!==testEl.style[t+"TransitionProperty"]?(cssPrefix="-"+t.toLowerCase()+"-",eventPrefix=e,!1):void 0});var Simplean=function(t){if(!t instanceof HTMLElement)throw new Error("Simplean must init by dom");var e=simpleanMap.get(t);return e?e:simpleanMap.set(t,new _Simplean(t))};Simplean.destroy=function(t){simpleanMap.remove(t)},Simplean.noConflict=function(t){window.$A=Simplean._$A,"string"==typeof t&&(window[t]=Simplean)};var _Simplean=function(t){this._dom=t,this._phaseList=[],this._phaseIndex=0,this._status="unstart"};_Simplean.prototype._start=function(){if("start"!==this._status){var t=this;this._status="start";var e=function(){var i=t._phaseList[t._phaseIndex];if(!i||"unstart"!==i.status)return void(t._status="stop");if(t._phaseIndex+=1,i.diffClassName){var n=t._dom.className,o=n,r=i.diffClassName.split(" ");if("-"===r[0])for(var s=1;s<r.length;s++)t._dom.classList.contains(r[s])&&(o=o.replace(r[s],""));else if("+"===r[0])for(var s=1;s<r.length;s++)t._dom.classList.contains(r[s])||(o+=" "+r[s]);if(o===n)return void setTimeout(function(){e()},0);var a=DomUtility.diffClass(t._dom,o,i.options.deep);i.transitionList=a.map(function(t){return{elem:t.elem,properties:t.properties}}),i.targetClassName=o}else{var a=DomUtility.diffStyle(t._dom,i.styles,!0);i.transitionList=[{elem:t._dom,properties:a.properties,needInit:a.needInit}]}t._step(i,function(){Utility.invokeIfExists(i.options.onStart,[t._dom],t)},function(){Utility.invokeIfExists(i.options.onStop,[t._dom],t),e()})};e()}},_Simplean.prototype._step=function(t,e,i){var n=this,o=eventPrefix?eventPrefix+Utility.firstUppercase("transitionEnd"):"transitionend",r=function(){if(t.status="start",Utility.invokeIfExists(e),n._dom.addEventListener(o,s),Utility.each(t.transitionList,function(e){e.properties.length&&(DomUtility.css(e.elem,e.needInit),DomUtility.addTransition(e.elem,e.properties,t.options))}),Utility.relayout(n._dom),t.styles?DomUtility.css(n._dom,t.styles):t.targetClassName&&(n._dom.className=t.targetClassName),"0ms"===t.options.duration)setTimeout(function(){s()},0);else{var i=parseInt(t.options.duration.replace("ms",""),10)+parseInt(t.options.delay.replace("ms",""),10);setTimeout(function(){"stop"!==t.status&&s()},i)}},s=function(e){"stop"!==t.status&&(t.status="stop",Utility.each(t.transitionList,function(t){DomUtility.removeTransition(t.elem,t.properties)}),n._dom.removeEventListener(o,s),setTimeout(function(){Utility.invokeIfExists(i)},0))};r()},_Simplean.prototype._setClass=function(t,e){t&&(this._phaseList.push({diffClassName:t,options:Utility.handleOptions(e),status:"unstart"}),this._start())},_Simplean.prototype.addClass=function(t,e){return this._setClass("+ "+t,e),this},_Simplean.prototype.removeClass=function(t,e){return this._setClass("- "+t,e),this},_Simplean.prototype.to=function(t,e){var i=this;return t=t||{},i._phaseList.push({styles:t,options:Utility.handleOptions(e),status:"unstart"}),i._start(),i},"object"==typeof window&&(Simplean._$A=Simplean,"undefined"!=typeof window.$A&&(Simplean._$A=window.$A),window.$A=window.Simplean=Simplean),"undefined"!=typeof define&&define.amd?define(function(){return Simplean}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=Simplean);var jq;"function"==typeof $?jq=$:"function"==typeof jQuery?jq=jQuery:"function"==typeof Zepto&&(jq=Zepto),jq&&!function(){var t=function(t){jq.fn["an"+Utility.firstUppercase(t)]=function(){this.each(function(e,i){var n=Simplean(i);n[t].apply(n,arguments)})}};t("to"),t("addClass"),t("removeClass")}();